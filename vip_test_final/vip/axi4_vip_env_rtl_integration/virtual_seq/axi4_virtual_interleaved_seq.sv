//==============================================================================
// AXI4 Virtual Interleaved Sequence
// Generated by AMBA Bus Matrix Configuration Tool
// Date: 2025-07-28 16:20:00
//==============================================================================

class axi4_virtual_interleaved_seq extends axi4_virtual_base_seq;
    
    `uvm_object_utils(axi4_virtual_interleaved_seq)
    
    // Parameters
    bit enable_data_interleaving = 1;
    int num_outstanding = 4;
    
    // Constructor
    function new(string name = "axi4_virtual_interleaved_seq");
        super.new(name);
    endfunction
    
    // Body method
    virtual task body();
        `uvm_info(get_type_name(), "Starting virtual interleaved sequence", UVM_MEDIUM)
        
        // Start multiple outstanding transactions
        fork
            repeat(num_outstanding) begin
                fork
                    send_interleaved_write();
                    send_interleaved_read();
                join_none
            end
        join
    endtask : body
    
    // Send interleaved write
    task send_interleaved_write();
        axi4_master_burst_seq burst_seq;
        
        burst_seq = axi4_master_burst_seq::type_id::create("burst_seq");
        burst_seq.burst_type = axi4_globals_pkg::INCR;
        burst_seq.burst_length = 8;
        burst_seq.start(p_sequencer.master_seqr[$urandom_range(2-1, 0)]);
    endtask
    
    // Send interleaved read
    task send_interleaved_read();
        axi4_master_burst_seq burst_seq;
        
        burst_seq = axi4_master_burst_seq::type_id::create("burst_seq");
        burst_seq.burst_type = axi4_globals_pkg::INCR;
        burst_seq.burst_length = 8;
        burst_seq.start(p_sequencer.master_seqr[$urandom_range(2-1, 0)]);
    endtask
    
endclass : axi4_virtual_interleaved_seq
