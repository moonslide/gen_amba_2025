//==============================================================================
// HVL Top Module
// Generated by AMBA Bus Matrix Configuration Tool
// Date: 2025-07-29 14:34:40
//==============================================================================

module hvl_top;
    
    import uvm_pkg::*;
    import axi4_test_pkg::*;
    import axi4_globals_pkg::*;
    
    // Generate block to set virtual interfaces
    generate
        for (genvar i = 0; i < NO_OF_MASTERS; i++) begin : vif_config
            initial begin
                uvm_config_db#(virtual axi4_master_driver_bfm)::set(null, 
                    $sformatf("uvm_test_top.env.master_agent[%0d].driver", i), 
                    "vif", 
                    hdl_top.master_bfm[i].master_driver_bfm_h);
                    
                uvm_config_db#(virtual axi4_master_monitor_bfm)::set(null, 
                    $sformatf("uvm_test_top.env.master_agent[%0d].monitor", i), 
                    "vif", 
                    hdl_top.master_bfm[i].master_monitor_bfm_h);
                    
                $display("[%0t] HVL_TOP: Set virtual interfaces for master agent[%0d]", $time, i);
            end
        end
    endgenerate
    
    initial begin
        $display("\n==============================================================");
        $display("[%0t] AXI4 VIP TESTBENCH STARTING", $time);
        $display("==============================================================");
        $display("[%0t] UVM version: %s", $time, uvm_revision_string());
        // Display test information
        begin
            string test_name;
            if ($value$plusargs("UVM_TESTNAME=%s", test_name))
                $display("[%0t] Test: +UVM_TESTNAME=%s", $time, test_name);
            else
                $display("[%0t] Test: Using default test", $time);
        end
        
        $display("[%0t] Verbosity: Setting to UVM_HIGH for maximum visibility", $time);
        $display("==============================================================");
        
        // Enable maximum verbosity for debugging
        uvm_top.set_report_verbosity_level(UVM_HIGH);
        
        // Enable detailed reporting
        uvm_top.set_report_id_verbosity("*", UVM_HIGH);
        
        // Run UVM test
        $display("[%0t] Starting UVM test execution...", $time);
        run_test();
        
        $display("\n==============================================================");
        $display("[%0t] AXI4 VIP TESTBENCH COMPLETED", $time);
        $display("==============================================================");
    end
    
endmodule : hvl_top
